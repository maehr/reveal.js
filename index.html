<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>open museum</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css">

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<meta name="theme-color" content="#fff8ff">
	
	<script type="text/javascript" src="js/janus.js" ></script>
	<script type="text/javascript" src="js/audiobridge.js"></script>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h2>Willkommen im open-museum</h2>
				<p>
					<img width="200" height="200" data-src="https://media0.giphy.com/media/2gUHK3J2NCMsqsz1su/giphy.gif"
						alt="ErklÃ¤rgif">
				</p>
				<p>
					<button type="button" onclick="Reveal.configure({ controls: false })">Hide controls</button>
					<button type="button" onclick="Reveal.configure({ controls: true })">Show controls</button>
				</p>
				<p>
					Besuchst du uns <a href="#">ALLEINE</a> oder <a href="#">MIT FREUNDENEINE</a>
				</p>
			</section>
			<section>
				<h3>Broadcast ID</h3>
				<div>A broadcast id must be defined by the master.</div>
				<div>Please enter or change the broadcast id below:</div>
				<div><input type="text" id="broadcastid" style="font-size:70%;" onchange="updateURL();"
						onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();"></div>
			</section>
			<section>
				<h3>Provide password</h3>
				<div>A password is required to start a broadcast.</div>
				<div> Please enter a password (or simply use the preset password) below:</div>
				<div><input type="password" id="password" style="font-size:70%;" value="123456"></div>
			</section>
			<section>
				<h3>Start broadcast</h3>
				<div>Click <a href="#"
						onclick="RevealBroadcast.start( { id: document.getElementById('broadcastid').value, password: document.getElementById('password').value } ); return false;"><i
							class="fa fa-rss"></i>HERE</a> to start the broadcast with the given id.</div>
				<div style="color:gray;font-size:20px">
					This may not work on all browsers. Please check the documentation on <a
						href="https://github.com/rajgoel/reveal.js-plugins/tree/master/broadcast">Github</a>
				</div>
			</section>
			<section>
				<section>
					<h2>Client</h2>
					<div>A client can join an existing broadcast.</div>
				</section>
				<section>
					<h2>Broadcast ID</h2>
					<div>
						Each client must use the broadcast id of the master, e.g., for this presentation, the master may
						share below link to the client<br>
						<a id="broadcasturl"></a>
					</div>
				</section>
				<section>
					<h2>Join broadcast</h2>
					<div>Click <a href="#"
							onclick="RevealBroadcast.connect( { id: document.getElementById('broadcastid').value } ); return false;"><i
								class="fa fa-toggle-right"></i></a> to connect to the broadcast with id <span
							style="color:red" id="currentid"></span>.</div>
				</section>
			</section>
			<section>
				<h2>Auf welche Reise willst du?</h2>
				<table style="width:100%">
					<tr>
						<td><a href="#">1918 Spanische Grippe</a></td>
						<td>1961 Cholera</td>
					</tr>
					<tr>
						<td>1980 HIV</td>
						<td>2002 SARS</td>
					</tr>
				</table>
			</section>
			<section>Patient Zero</section>
			<section>
				<section>
					<h2>Vertical Slides</h2>
					<p>Slides can be nested inside of each other.</p>
					<p>Use the <em>Space</em> key to navigate through all slides.</p>
					<br>
					<a href="#" class="navigate-down">
						<img width="178" height="238"
							data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow">
					</a>
				</section>
				<section>
					<h2>Basement Level 1</h2>
					<p>Nested slides are useful for adding additional detail underneath a high level horizontal slide.
					</p>
				</section>
				<section>
					<h2>Basement Level 2</h2>
					<p>That's it, time to go back up.</p>
					<br>
					<a href="#/2">
						<img width="178" height="238"
							data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Up arrow"
							style="transform: rotate(180deg); -webkit-transform: rotate(180deg);">
					</a>
				</section>
			</section>
			<section>Patient Zero</section>
		</div>

	</div>

	<script src="js/reveal.js"></script>

	<script>
		// Manage presentation specific handling of broadcast id
		// (optional)
		function addParam(url, param, value) {
			var a = document.createElement('a'),
				regex = /(?:\?|&amp;|&)+([^=]+)(?:=([^&]*))*/g;
			var match, str = [];
			a.href = url;
			param = encodeURIComponent(param);
			while (match = regex.exec(a.search))
				if (param != match[1]) str.push(match[1] + (match[2] ? "=" + match[2] : ""));
			str.push(param + (value ? "=" + encodeURIComponent(value) : ""));
			a.search = str.join("&");
			return a.href;
		}

		function updateURL() {
			document.getElementById("broadcasturl").href = addParam(window.location.href, "broadcastid", document
				.getElementById('broadcastid').value);
			document.getElementById("broadcasturl").innerHTML = addParam(window.location.href, "broadcastid", document
				.getElementById('broadcastid').value);
			document.getElementById("currentid").innerHTML = document.getElementById('broadcastid').value;
		}

		function getRandomString() {
			if (window.crypto && window.crypto.getRandomValues && navigator.userAgent.indexOf('Safari') === -1) {
				var a = window.crypto.getRandomValues(new Uint32Array(3)),
					token = '';
				for (var i = 0, l = a.length; i < l; i++) {
					token += a[i].toString(36);
				}
				return token;
			} else {
				return (Math.random() * new Date().getTime()).toString(36).replace(/\./g, '');
			}
		}

		function getParameterByName(name, url) {
			if (!url) {
				url = window.location.href;
			}
			name = name.replace(/[\[\]]/g, "\\$&");
			var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
				results = regex.exec(url);
			if (!results) return null;
			if (!results[2]) return '';
			return decodeURIComponent(results[2].replace(/\+/g, " "));
		}

		document.getElementById("broadcastid").value = getParameterByName('broadcastid') || getRandomString();
		updateURL();

		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({

			// Display presentation control arrows
			// TODO remove
			controls: true,

			// Help the user learn the controls by providing hints, for example by
			// bouncing the down arrow when they first encounter a vertical slide
			controlsTutorial: false,

			// Determines where controls appear, "edges" or "bottom-right"
			controlsLayout: 'edges',

			// Visibility rule for backwards navigation arrows; "faded", "hidden"
			// or "visible"
			controlsBackArrows: 'faded',

			// Display a presentation progress bar
			progress: false,

			// Display the page number of the current slide
			slideNumber: false,

			// Add the current slide number to the URL hash so that reloading the
			// page/copying the URL will return you to the same slide
			hash: false,

			// Push each slide change to the browser history. Implies `hash: true`
			history: false,

			// Enable keyboard shortcuts for navigation
			keyboard: false,

			// Enable the slide overview mode
			overview: false,

			// Vertical centering of slides
			center: false,

			// Enables touch navigation on devices with touch input
			touch: true,

			// Loop the presentation
			loop: false,

			// Change the presentation direction to be RTL
			rtl: false,

			// See https://github.com/hakimel/reveal.js/#navigation-mode
			navigationMode: 'default',

			// Randomizes the order of slides each time the presentation loads
			shuffle: false,

			// Turns fragments on and off globally
			fragments: false,

			// Flags whether to include the current fragment in the URL,
			// so that reloading brings you to the same fragment position
			fragmentInURL: false,

			// Flags if the presentation is running in an embedded mode,
			// i.e. contained within a limited portion of the screen
			embedded: false,

			// Flags if we should show a help overlay when the questionmark
			// key is pressed
			help: false,

			// Flags if speaker notes should be visible to all viewers
			showNotes: false,

			// Global override for autoplaying embedded media (video/audio/iframe)
			// - null: Media will only autoplay if data-autoplay is present
			// - true: All media will autoplay, regardless of individual setting
			// - false: No media will autoplay, regardless of individual setting
			autoPlayMedia: null,

			// Global override for preloading lazy-loaded iframes
			// - null: Iframes with data-src AND data-preload will be loaded when within
			//   the viewDistance, iframes with only data-src will be loaded when visible
			// - true: All iframes with data-src will be loaded when within the viewDistance
			// - false: All iframes with data-src will be loaded only when visible
			preloadIframes: true,

			// Number of milliseconds between automatically proceeding to the
			// next slide, disabled when set to 0, this value can be overwritten
			// by using a data-autoslide attribute on your slides
			autoSlide: 0,

			// Stop auto-sliding after user input
			autoSlideStoppable: true,

			// Use this method for navigation when auto-sliding
			autoSlideMethod: Reveal.navigateNext,

			// Specify the average time in seconds that you think you will spend
			// presenting each slide. This is used to show a pacing timer in the
			// speaker view
			defaultTiming: 120,

			// Specify the total time in seconds that is available to
			// present.  If this is set to a nonzero value, the pacing
			// timer will work out the time available for each slide,
			// instead of using the defaultTiming value
			totalTime: 0,

			// Specify the minimum amount of time you want to allot to
			// each slide, if using the totalTime calculation method.  If
			// the automated time allocation causes slide pacing to fall
			// below this threshold, then you will see an alert in the
			// speaker notes window
			minimumTimePerSlide: 0,

			// Enable slide navigation via mouse wheel
			mouseWheel: false,

			// Hide cursor if inactive
			hideInactiveCursor: false,

			// Time before the cursor is hidden (in ms)
			hideCursorTime: 5000,

			// Hides the address bar on mobile devices
			hideAddressBar: true,

			// Opens links in an iframe preview overlay
			// Add `data-preview-link` and `data-preview-link="false"` to customise each link
			// individually
			previewLinks: false,

			// Transition style
			transition: 'slide', // none/fade/slide/convex/concave/zoom

			// Transition speed
			transitionSpeed: 'slow', // default/fast/slow

			// Transition style for full page slide backgrounds
			backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom

			// Number of slides away from the current that are visible
			viewDistance: 3,

			// Number of slides away from the current that are visible on mobile
			// devices. It is advisable to set this to a lower number than
			// viewDistance in order to save resources.
			mobileViewDistance: 2,

			// Parallax background image
			parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

			// Parallax background size
			parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

			// Number of pixels to move the parallax background per slide
			// - Calculated automatically unless specified
			// - Set to 0 to disable movement along an axis
			parallaxBackgroundHorizontal: null,
			parallaxBackgroundVertical: null,

			// The display mode that will be used to show slides
			display: 'block',

			// 
			keyboard: {
				// go to the next slide when the ENTER key is pressed
				// 13: 'next', 
				// do something custom when ESC is pressed
				// 27: function() {}, 
				// don't do anything when SPACE is pressed (i.e. disable a reveal.js default binding)
				// 32: null 
			},
			broadcast: {
				// Set master password to "123456"
				secret: '$2a$05$hhgakVn1DWBfgfSwMihABeYToIBEiQGJ.ONa.HWEiNGNI6mxFCy8S',
				// Configure RTCMultiConnection
				// secret: '$2a$05$hhgakVn1DWBfgfSwMihABeYToIBEiQGJ.ONa.HWEiNGNI6mxFCy8S',
				connection: {
					// For testing purposes you may use below server, but availability and stability are not guaranteed. 
					// For anything mission critical I recommend you run your own server. 
					// You can deploy https://github.com/muaz-khan/RTCMultiConnection on heroku.com
					// See instructions at https://github.com/muaz-khan/RTCMultiConnection/blob/master/docs/installation-guide.md
					//					socketURL: 'https://rtcmulticonnection.herokuapp.com:443/'
					socketURL: "https://revealjs-broadcast.herokuapp.com:443/",
					session: {
						audio: true,
						video: false
					}
				},
			},
			dependencies: [
				// ...
				{
					src: '../reveal.js-plugins/broadcast/RTCMultiConnection/RTCMultiConnection.min.js'
				},
				{
					src: '../reveal.js-plugins/broadcast/RTCMultiConnection/adapter.js'
				},
				{
					src: '../reveal.js-plugins/broadcast/RTCMultiConnection/socket.io.js'
				},
				{
					src: '../reveal.js-plugins/broadcast/bCrypt.js'
				},
				{
					src: '../reveal.js-plugins/broadcast/broadcast.js'
				},
				// ...
			],
		});
		// A ready event is fired when reveal.js has loaded all non-async dependencies and is ready to start navigating. To check if reveal.js is already 'ready' you can call Reveal.isReady().
		// Note that we also add a .ready class to the .reveal element so that you can hook into this with CSS.
		Reveal.addEventListener('ready', function (event) {
			// event.currentSlide, event.indexh, event.indexv
		});
	</script>
</body>

</html>